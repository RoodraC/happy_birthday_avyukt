<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Meta-Level Mobile VR</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script>
      AFRAME.registerComponent('teleport-on-gaze', {
        schema: { speed: { type: 'number', default: 5 } },
        init: function () {
          this.timer = 0;
        },
        tick: function (time, dt) {
          const el = this.el;
          const camera = document.querySelector('[camera]');
          const intersection = camera.components.raycaster.intersectedEl;
          if (intersection && intersection === el) {
            this.timer += dt;
            if (this.timer > 1000) {
              camera.object3D.position.copy(el.object3D.position);
              this.timer = 0;
            }
          } else {
            this.timer = 0;
          }
        }
      });
    </script>
  </head>
  <body>
    <a-scene vr-mode-ui="enabled: true" renderer="antialias: true">
      <!-- Environment -->
      <a-sky color="#ECECEC"></a-sky>
      <a-plane rotation="-90 0 0" width="20" height="20" color="#7BC8A4"></a-plane>

      <!-- Teleportation Points -->
      <a-ring position="2 0.1 -3" radius-inner="0.2" radius-outer="0.3" color="#EF2D5E"
              teleport-on-gaze></a-ring>
      <a-ring position="-2 0.1 -3" radius-inner="0.2" radius-outer="0.3" color="#4CC3D9"
              teleport-on-gaze></a-ring>

      <!-- Interactive Boxes (Grab Simulation) -->
      <a-box position="0 0.5 -2" depth="0.5" height="0.5" width="0.5" color="#FFC65D"
             class="interactive" 
             event-set__enter="_event: mouseenter; scale: 1.2 1.2 1.2"
             event-set__leave="_event: mouseleave; scale: 1 1 1"
             animation__click="property: position; to: 0 1.5 -2; startEvents: click; dur: 300"></a-box>

      <!-- Targets for Shooting Game -->
      <a-sphere position="1 1.25 -4" radius="0.25" color="#EF2D5E" class="target"
                event-set__enter="_event: mouseenter; color: #FF0000"
                event-set__leave="_event: mouseleave; color: #EF2D5E"
                animation__click="property: scale; to: 0 0 0; startEvents: click; dur: 200">
      </a-sphere>
      <a-sphere position="-1 1.25 -4" radius="0.25" color="#4CC3D9" class="target"
                event-set__enter="_event: mouseenter; color: #0000FF"
                event-set__leave="_event: mouseleave; color: #4CC3D9"
                animation__click="property: scale; to: 0 0 0; startEvents: click; dur: 200">
      </a-sphere>

      <!-- Camera + Cursor + Raycaster -->
      <a-entity camera look-controls>
        <a-entity cursor="fuse: true; fuseTimeout: 500"
                  raycaster="objects: .interactive, .target, a-ring"
                  position="0 0 -1"
                  geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.02"
                  material="color: white; shader: flat">
        </a-entity>
      </a-entity>

      <!-- Spatial Audio Zone -->
      <a-entity sound="src: url(https://cdn.aframe.io/basic-guide/audio/turntable.ogg);
                         positional: true; autoplay: false"
                geometry="primitive: sphere; radius: 1.5"
                position="0 0 -6"
                sound__enter="on: raycaster-intersected; autoplay: true">
      </a-entity>
    </a-scene>
  </body>
</html>
